(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,n=window.wp.blockEditor,o=window.wp.components;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i.apply(null,arguments)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=JSON.parse('{"UU":"sync/cookie-banner"}');(0,e.registerBlockType)(s.UU,{edit:function(e){var a=e.attributes,l=e.setAttributes,s=e.context,m=a.bannerTitle,u=a.bannerDescription,y=a.privacyPolicyLink,p=a.privacyPolicyText,_=a.termsLink,b=a.termsText,d=a.acceptAllText,C=a.rejectAllText,g=a.customizeText,w=a.savePreferencesText,h=a.necessaryCookiesTitle,k=a.necessaryCookiesDescription,R=a.functionalCookiesTitle,f=a.functionalCookiesDescription,v=a.analyticalCookiesTitle,E=a.analyticalCookiesDescription,T=a.advertisingCookiesTitle,P=a.advertisingCookiesDescription,x=a.trackingCookiesTitle,N=a.trackingCookiesDescription,O=a.bannerPosition,S=a.floatingButtonPosition,B=a.cookieExpiration,D=a.primaryColor,j=a.textColor,L=a.backgroundColor,A=a.showOnlyInSiteEditor,F=a.privacyPolicyVersion,z=a.termsVersion,V=a.checkVersionChanges,I=a.enabledCookieTypes,U=a.showBanner,G=a.showDoNotSellLink,M=a.doNotSellLink,W=a.doNotSellText,q=a.consentModel,J=(0,n.useBlockProps)(),H=s.postType,K=A&&!("wp_template"===H||"wp_template_part"===H),Q=[{label:(0,t.__)("Bottom","wisesync"),value:"bottom"},{label:(0,t.__)("Top","wisesync"),value:"top"},{label:(0,t.__)("Center","wisesync"),value:"center"}],X=[{label:(0,t.__)("Bottom Right","wisesync"),value:"bottom-right"},{label:(0,t.__)("Bottom Left","wisesync"),value:"bottom-left"},{label:(0,t.__)("Top Right","wisesync"),value:"top-right"},{label:(0,t.__)("Top Left","wisesync"),value:"top-left"}],Y=[{label:(0,t.__)("Opt-in (Explicit Consent)","wisesync"),value:"opt-in"},{label:(0,t.__)("Opt-out (Implied Consent)","wisesync"),value:"opt-out"},{label:(0,t.__)("Notice Only","wisesync"),value:"notice-only"},{label:(0,t.__)("Deemed Consent","wisesync"),value:"deemed-consent"},{label:(0,t.__)("Implied Consent","wisesync"),value:"implied-consent"}],Z=function(e,t){l({enabledCookieTypes:c(c({},I),{},r({},e,t))})};return React.createElement(React.Fragment,null,React.createElement(n.InspectorControls,null,React.createElement(o.TabPanel,{className:"cookie-banner-tabs",tabs:[{name:"visibility",title:(0,t.__)("Visibility","wisesync"),className:"visibility-tab"},{name:"general",title:(0,t.__)("General","wisesync")},{name:"cookieCategories",title:(0,t.__)("Cookie Categories","wisesync")},{name:"appearance",title:(0,t.__)("Appearance","wisesync")},{name:"advanced",title:(0,t.__)("Advanced","wisesync")},{name:"restrictions",title:(0,t.__)("Restrictions","wisesync")},{name:"compliance",title:(0,t.__)("Compliance","wisesync")}]},(function(e){return"visibility"===e.name?React.createElement(o.PanelBody,{title:(0,t.__)("Banner Visibility","wisesync"),initialOpen:!0},React.createElement(o.ToggleControl,{label:(0,t.__)("Show Banner","wisesync"),checked:U,onChange:function(e){return l({showBanner:e})},help:(0,t.__)("Toggle to show or minimize the banner. When hidden, it will be minimized to the bottom of the page.","wisesync")}),React.createElement("p",{className:"banner-visibility-note"},(0,t.__)("Note: This setting only affects the editor preview and frontend display. The banner will still be functional when minimized, and users can access it via the floating button.","wisesync"))):"general"===e.name?React.createElement(React.Fragment,null,React.createElement(o.PanelBody,{title:(0,t.__)("Banner Content","wisesync"),initialOpen:!0},React.createElement(o.TextControl,{label:(0,t.__)("Banner Title","wisesync"),value:m,onChange:function(e){return l({bannerTitle:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Banner Description","wisesync"),value:u,onChange:function(e){return l({bannerDescription:e})},multiline:"p"}),React.createElement(o.TextControl,{label:(0,t.__)("Privacy Policy Link","wisesync"),value:y,onChange:function(e){return l({privacyPolicyLink:e})},help:(0,t.__)("Enter the URL to your Privacy Policy page","wisesync")}),React.createElement(o.TextControl,{label:(0,t.__)("Privacy Policy Text","wisesync"),value:p,onChange:function(e){return l({privacyPolicyText:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Privacy Policy Version","wisesync"),value:F,onChange:function(e){return l({privacyPolicyVersion:e})},help:(0,t.__)("Optional: Set a version identifier (like a date) to track policy changes","wisesync")}),React.createElement(o.TextControl,{label:(0,t.__)("Terms Link","wisesync"),value:_,onChange:function(e){return l({termsLink:e})},help:(0,t.__)("Enter the URL to your Terms of Service page","wisesync")}),React.createElement(o.TextControl,{label:(0,t.__)("Terms Text","wisesync"),value:b,onChange:function(e){return l({termsText:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Terms Version","wisesync"),value:z,onChange:function(e){return l({termsVersion:e})},help:(0,t.__)("Optional: Set a version identifier (like a date) to track terms changes","wisesync")}),React.createElement(o.ToggleControl,{label:(0,t.__)("Check for Version Changes","wisesync"),checked:V,onChange:function(e){return l({checkVersionChanges:e})},help:(0,t.__)("When enabled, users will be asked to re-consent when your privacy policy or terms change","wisesync")})),React.createElement(o.PanelBody,{title:(0,t.__)("Button Labels","wisesync"),initialOpen:!1},React.createElement(o.TextControl,{label:(0,t.__)("Accept All Text","wisesync"),value:d,onChange:function(e){return l({acceptAllText:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Reject All Text","wisesync"),value:C,onChange:function(e){return l({rejectAllText:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Customize Text","wisesync"),value:g,onChange:function(e){return l({customizeText:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Save Preferences Text","wisesync"),value:w,onChange:function(e){return l({savePreferencesText:e})}}))):"cookieCategories"===e.name?React.createElement(React.Fragment,null,React.createElement(o.PanelBody,{title:(0,t.__)("Cookie Types Configuration","wisesync"),initialOpen:!0},React.createElement("p",{className:"cookie-category-help"},(0,t.__)("Enable or disable different cookie categories. Note that necessary cookies cannot be disabled.","wisesync")),React.createElement(o.ToggleControl,{label:(0,t.__)("Functional Cookies","wisesync"),checked:I.functional,onChange:function(e){return Z("functional",e)}}),React.createElement(o.ToggleControl,{label:(0,t.__)("Analytical Cookies","wisesync"),checked:I.analytical,onChange:function(e){return Z("analytical",e)}}),React.createElement(o.ToggleControl,{label:(0,t.__)("Advertising Cookies","wisesync"),checked:I.advertising,onChange:function(e){return Z("advertising",e)}}),React.createElement(o.ToggleControl,{label:(0,t.__)("Tracking Cookies","wisesync"),checked:I.tracking,onChange:function(e){return Z("tracking",e)}})),React.createElement(o.PanelBody,{title:(0,t.__)("Necessary Cookies","wisesync"),initialOpen:!1},React.createElement(o.TextControl,{label:(0,t.__)("Title","wisesync"),value:h,onChange:function(e){return l({necessaryCookiesTitle:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Description","wisesync"),value:k,onChange:function(e){return l({necessaryCookiesDescription:e})},multiline:"p"}),React.createElement("p",{className:"cookie-category-note"},(0,t.__)("Necessary cookies are always enabled and cannot be rejected.","wisesync"))),I.functional&&React.createElement(o.PanelBody,{title:(0,t.__)("Functional Cookies","wisesync"),initialOpen:!1},React.createElement(o.TextControl,{label:(0,t.__)("Title","wisesync"),value:R,onChange:function(e){return l({functionalCookiesTitle:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Description","wisesync"),value:f,onChange:function(e){return l({functionalCookiesDescription:e})},multiline:"p"})),I.analytical&&React.createElement(o.PanelBody,{title:(0,t.__)("Analytical Cookies","wisesync"),initialOpen:!1},React.createElement(o.TextControl,{label:(0,t.__)("Title","wisesync"),value:v,onChange:function(e){return l({analyticalCookiesTitle:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Description","wisesync"),value:E,onChange:function(e){return l({analyticalCookiesDescription:e})},multiline:"p"})),I.advertising&&React.createElement(o.PanelBody,{title:(0,t.__)("Advertising Cookies","wisesync"),initialOpen:!1},React.createElement(o.TextControl,{label:(0,t.__)("Title","wisesync"),value:T,onChange:function(e){return l({advertisingCookiesTitle:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Description","wisesync"),value:P,onChange:function(e){return l({advertisingCookiesDescription:e})},multiline:"p"})),I.tracking&&React.createElement(o.PanelBody,{title:(0,t.__)("Tracking Cookies","wisesync"),initialOpen:!1},React.createElement(o.TextControl,{label:(0,t.__)("Title","wisesync"),value:x,onChange:function(e){return l({trackingCookiesTitle:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Description","wisesync"),value:N,onChange:function(e){return l({trackingCookiesDescription:e})},multiline:"p"}))):"appearance"===e.name?React.createElement(React.Fragment,null,React.createElement(o.PanelBody,{title:(0,t.__)("Layout Settings","wisesync"),initialOpen:!0},React.createElement(o.SelectControl,{label:(0,t.__)("Banner Position","wisesync"),value:O,options:Q,onChange:function(e){return l({bannerPosition:e})}}),React.createElement(o.SelectControl,{label:(0,t.__)("Floating Button Position","wisesync"),value:S,options:X,onChange:function(e){return l({floatingButtonPosition:e})}})),React.createElement(o.PanelBody,{title:(0,t.__)("Colors","wisesync"),initialOpen:!1},React.createElement("div",{className:"cookie-banner-color-setting"},React.createElement("p",null,(0,t.__)("Primary Color","wisesync")),React.createElement(o.ColorPicker,{color:D,onChangeComplete:function(e){return l({primaryColor:e.hex})},disableAlpha:!0})),React.createElement("div",{className:"cookie-banner-color-setting"},React.createElement("p",null,(0,t.__)("Text Color","wisesync")),React.createElement(o.ColorPicker,{color:j,onChangeComplete:function(e){return l({textColor:e.hex})},disableAlpha:!0})),React.createElement("div",{className:"cookie-banner-color-setting"},React.createElement("p",null,(0,t.__)("Background Color","wisesync")),React.createElement(o.ColorPicker,{color:L,onChangeComplete:function(e){return l({backgroundColor:e.hex})},disableAlpha:!0})))):"advanced"===e.name?React.createElement(React.Fragment,null,React.createElement(o.PanelBody,{title:(0,t.__)("Cookie Settings","wisesync"),initialOpen:!0},React.createElement(o.RangeControl,{label:(0,t.__)("Cookie Expiration (days)","wisesync"),value:B,onChange:function(e){return l({cookieExpiration:e})},min:1,max:730}),React.createElement(o.SelectControl,{label:(0,t.__)("Consent Model","wisesync"),value:q,options:Y,onChange:function(e){return l({consentModel:e})},help:(0,t.__)("Select the consent model to use based on your region's legal requirements. This will be overridden by GeoIP detection if enabled.","wisesync")}),React.createElement("p",{className:"cookie-info-notice"},(0,t.__)("Note: The cookie expiration setting may be automatically adjusted based on the visitor's location to comply with local regulations.","wisesync")))):"restrictions"===e.name?React.createElement(React.Fragment,null,React.createElement(o.PanelBody,{title:(0,t.__)("Block Usage Restrictions","wisesync"),initialOpen:!0},React.createElement(o.ToggleControl,{label:(0,t.__)("Show Only in Site Editor","wisesync"),checked:A,onChange:function(e){return l({showOnlyInSiteEditor:e})},help:(0,t.__)("When enabled, this block will only be visible when added to a template in the Site Editor, not in individual posts or pages.","wisesync")}))):"compliance"===e.name?React.createElement(React.Fragment,null,React.createElement(o.PanelBody,{title:(0,t.__)("Regional Compliance","wisesync"),initialOpen:!0},React.createElement("p",null,(0,t.__)("The banner will automatically adjust to comply with privacy regulations based on the visitor's location.","wisesync")),React.createElement(o.ToggleControl,{label:(0,t.__)("Show Do Not Sell Link","wisesync"),checked:G,onChange:function(e){return l({showDoNotSellLink:e})},help:(0,t.__)('Display a "Do Not Sell or Share My Personal Information" link (required for CCPA/CPRA compliance).',"wisesync")}),G&&React.createElement(React.Fragment,null,React.createElement(o.TextControl,{label:(0,t.__)("Do Not Sell Link","wisesync"),value:M,onChange:function(e){return l({doNotSellLink:e})},help:(0,t.__)("URL to your Do Not Sell or Share My Personal Information page","wisesync")}),React.createElement(o.TextControl,{label:(0,t.__)("Do Not Sell Text","wisesync"),value:W,onChange:function(e){return l({doNotSellText:e})}})),React.createElement("p",{className:"compliance-note"},(0,t.__)("Note: GeoIP detection will override some of these settings to ensure compliance with local laws.","wisesync")))):void 0}))),React.createElement("div",i({},J,{className:"".concat(J.className||""," ").concat(U?"":"minimized-banner")}),K?React.createElement(o.Notice,{status:"warning",isDismissible:!1,className:"cookie-banner-notice-restriction"},(0,t.__)("This Cookie Banner block is configured to only be shown when used in the Site Editor. It will not be visible on individual posts or pages.","wisesync")):React.createElement(o.Placeholder,{icon:"privacy",label:(0,t.__)("Cookie Consent Banner","wisesync"),instructions:(0,t.__)("Configure the cookie consent banner settings in the sidebar. This block will display a GDPR compliant cookie consent banner on the frontend of your site.","wisesync")},React.createElement("div",{className:"cookie-banner-preview"},React.createElement("div",{className:"cookie-banner-mock ".concat(U?"":"minimized"),style:{backgroundColor:L,color:j,borderTop:"3px solid ".concat(D)}},U&&React.createElement(React.Fragment,null,React.createElement("div",{className:"cookie-banner-mock-content"},React.createElement("h4",{style:{color:j}},m),React.createElement("p",null,u),React.createElement("div",{className:"cookie-banner-mock-links"},y&&React.createElement("span",{className:"privacy-link"},React.createElement("a",{href:"#",style:{color:D}},p)),y&&_&&React.createElement("span",{className:"link-separator"}," | "),_&&React.createElement("span",{className:"terms-link"},React.createElement("a",{href:"#",style:{color:D}},b)),(y||_)&&G&&React.createElement("span",{className:"link-separator"}," | "),G&&React.createElement("span",{className:"do-not-sell-link"},React.createElement("a",{href:"#",style:{color:D}},W)))),React.createElement("div",{className:"cookie-banner-mock-buttons"},React.createElement("button",{className:"cookie-action-button secondary",style:{borderColor:D,color:D}},g),React.createElement("button",{className:"cookie-action-button secondary",style:{borderColor:D,color:D}},C),React.createElement("button",{className:"cookie-action-button primary",style:{backgroundColor:D,borderColor:D}},d))),!U&&React.createElement("div",{className:"minimized-banner-indicator",style:{backgroundColor:D}},React.createElement("span",null,(0,t.__)("Banner minimized. Toggle visibility in block settings.","wisesync")))),React.createElement("div",{className:"floating-button-mock ".concat(S),style:{backgroundColor:D}},React.createElement("span",{className:"dashicons dashicons-privacy"}))),React.createElement("p",{className:"cookie-banner-notice"},U?(0,t.__)("This block has a preview in the editor but will adapt to the visitor's location on the frontend.","wisesync"):(0,t.__)("Banner is minimized. Users can still access settings via the floating button.","wisesync")),React.createElement("p",null,(0,t.__)("Learn more about","wisesync"),React.createElement(o.ExternalLink,{href:"https://gdpr.eu/cookies/"},(0,t.__)("GDPR Cookie Compliance","wisesync"))))))}})})();