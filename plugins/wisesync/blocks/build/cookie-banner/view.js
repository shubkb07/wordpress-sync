(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function i(t){var i=function(t){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(i)?i:i+""}var n=function(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var o="expires="+n.toUTCString();document.cookie=e+"="+t+";"+o+";path=/;SameSite=Lax"},o=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null};window.WiseSyncCookies={registeredServices:{},callbacks:{necessary:[],functional:[],analytical:[],advertising:[],tracking:[]},versions:{privacy:null,terms:null}},window.is_sync_cookie_permission_to=function(e){if("necessary"===e)return!0;if(!["functional","analytical","advertising","tracking"].includes(e))return console.warn('Cookie permission type "'.concat(e,'" is not recognized')),!1;var t=o("wisesync_cookie_consent");if(!t)return!1;try{return!0===JSON.parse(t)[e]}catch(e){return console.error("Error parsing cookie consent data:",e),!1}},window.register_cookie_service=function(e,t,i){var n=["functional","analytical","advertising","tracking"];n.includes(i)?(window.WiseSyncCookies.registeredServices[e]={name:t,type:i,registered:(new Date).toISOString()},window.is_sync_cookie_permission_to(i)&&function(e){Array.isArray(window.WiseSyncCookies.callbacks[e])&&window.WiseSyncCookies.callbacks[e].forEach((function(e){"function"==typeof e&&e()}))}(i)):console.error("Invalid cookie service type: ".concat(i,". Must be one of: ").concat(n.join(", ")))};var s=function(){return e=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.blockId=t,this.config=i,this.cookieName="wisesync_cookie_consent",this.cookieExpiration=i.cookieExpiration||365,this.isCustomizing=!1,this.consentStatus=this.getConsentStatus(),this.elements={banner:document.getElementById("cookie-banner-"+t),floatingButton:document.getElementById("cookie-settings-button-"+t),customizeModal:document.getElementById("cookie-customize-modal-"+t)},this.policyVersionsChanged=this.checkPolicyVersions(),this.init()},(i=[{key:"init",value:function(){!this.hasConsent()||this.policyVersionsChanged?this.showBanner():(this.hideBanner(),this.showFloatingButton(),this.executeCallbacks(this.consentStatus)),this.attachEventListeners(),this.storeCurrentPolicyVersions()}},{key:"attachEventListeners",value:function(){var e=this,t=this.elements.banner.querySelector(".cookie-accept-all"),i=this.elements.banner.querySelector(".cookie-reject-all"),n=this.elements.banner.querySelector(".cookie-customize");t&&t.addEventListener("click",(function(){return e.acceptAll()})),i&&i.addEventListener("click",(function(){return e.rejectAll()})),n&&n.addEventListener("click",(function(){return e.openCustomizeModal()})),this.elements.floatingButton&&this.elements.floatingButton.addEventListener("click",(function(){return e.openCustomizeModal()}));var o=this.elements.customizeModal?this.elements.customizeModal.querySelector(".cookie-save-preferences"):null;o&&o.addEventListener("click",(function(){return e.savePreferences()}));var s=this.elements.customizeModal?this.elements.customizeModal.querySelector(".cookie-modal-close"):null;s&&s.addEventListener("click",(function(){return e.closeCustomizeModal()})),this.elements.customizeModal&&document.addEventListener("click",(function(t){t.target===e.elements.customizeModal&&e.closeCustomizeModal()})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.isCustomizing&&e.closeCustomizeModal()}))}},{key:"hasConsent",value:function(){return null!==o(this.cookieName)}},{key:"getConsentStatus",value:function(){var e=o(this.cookieName);if(!e)return{necessary:!0,functional:!1,analytical:!1,advertising:!1,tracking:!1};try{return JSON.parse(e)}catch(e){return{necessary:!0,functional:!1,analytical:!1,advertising:!1,tracking:!1}}}},{key:"checkPolicyVersions",value:function(){if(!this.config.checkVersionChanges||!this.hasConsent())return!1;var e=o("wisesync_policy_versions");if(!e)return!1;try{var t=JSON.parse(e);return!(!this.config.privacyPolicyVersion||!t.privacy||t.privacy===this.config.privacyPolicyVersion)||!(!this.config.termsVersion||!t.terms||t.terms===this.config.termsVersion)}catch(e){return!1}}},{key:"storeCurrentPolicyVersions",value:function(){if(this.config.checkVersionChanges){var e={privacy:this.config.privacyPolicyVersion||null,terms:this.config.termsVersion||null};n("wisesync_policy_versions",JSON.stringify(e),this.cookieExpiration),window.WiseSyncCookies.versions=e}}},{key:"acceptAll",value:function(){var e,t,i,n,o,s,c,r,a={necessary:!0,functional:null===(e=null===(t=this.config.enabledCookieTypes)||void 0===t?void 0:t.functional)||void 0===e||e,analytical:null===(i=null===(n=this.config.enabledCookieTypes)||void 0===n?void 0:n.analytical)||void 0===i||i,advertising:null===(o=null===(s=this.config.enabledCookieTypes)||void 0===s?void 0:s.advertising)||void 0===o||o,tracking:null===(c=null===(r=this.config.enabledCookieTypes)||void 0===r?void 0:r.tracking)||void 0===c||c};this.saveConsentStatus(a),this.hideBanner(),this.showFloatingButton(),this.executeCallbacks(a)}},{key:"rejectAll",value:function(){var e={necessary:!0,functional:!1,analytical:!1,advertising:!1,tracking:!1};this.saveConsentStatus(e),this.hideBanner(),this.showFloatingButton(),this.executeCallbacks(e)}},{key:"savePreferences",value:function(){var e,t,i,n,o,s,c,r,a={necessary:!0,functional:null!==(e=null===(t=this.elements.customizeModal.querySelector("#cookie-functional"))||void 0===t?void 0:t.checked)&&void 0!==e&&e,analytical:null!==(i=null===(n=this.elements.customizeModal.querySelector("#cookie-analytical"))||void 0===n?void 0:n.checked)&&void 0!==i&&i,advertising:null!==(o=null===(s=this.elements.customizeModal.querySelector("#cookie-advertising"))||void 0===s?void 0:s.checked)&&void 0!==o&&o,tracking:null!==(c=null===(r=this.elements.customizeModal.querySelector("#cookie-tracking"))||void 0===r?void 0:r.checked)&&void 0!==c&&c};this.saveConsentStatus(a),this.hideBanner(),this.closeCustomizeModal(),this.showFloatingButton(),this.executeCallbacks(a)}},{key:"saveConsentStatus",value:function(e){var t=JSON.stringify(e);n(this.cookieName,t,this.cookieExpiration),this.consentStatus=e;var i=new CustomEvent("cookieConsentUpdated",{detail:{consent:e,blockId:this.blockId,services:window.WiseSyncCookies.registeredServices}});document.dispatchEvent(i)}},{key:"showBanner",value:function(){this.elements.banner&&(this.elements.banner.classList.add("visible"),this.elements.banner.setAttribute("aria-hidden","false"))}},{key:"hideBanner",value:function(){this.elements.banner&&(this.elements.banner.classList.remove("visible"),this.elements.banner.setAttribute("aria-hidden","true"))}},{key:"showFloatingButton",value:function(){var e=this;this.elements.floatingButton&&setTimeout((function(){e.elements.floatingButton.classList.add("visible"),e.elements.floatingButton.setAttribute("aria-hidden","false")}),1e3)}},{key:"openCustomizeModal",value:function(){if(this.elements.customizeModal){var e=this.elements.customizeModal.querySelector("#cookie-functional"),t=this.elements.customizeModal.querySelector("#cookie-analytical"),i=this.elements.customizeModal.querySelector("#cookie-advertising"),n=this.elements.customizeModal.querySelector("#cookie-tracking");e&&(e.checked=this.consentStatus.functional),t&&(t.checked=this.consentStatus.analytical),i&&(i.checked=this.consentStatus.advertising),n&&(n.checked=this.consentStatus.tracking),this.elements.customizeModal.classList.add("visible"),this.elements.customizeModal.setAttribute("aria-hidden","false"),this.isCustomizing=!0,this.hideBanner();var o=this.elements.customizeModal.querySelector('input[type="checkbox"]');o&&o.focus()}}},{key:"closeCustomizeModal",value:function(){this.elements.customizeModal&&(this.elements.customizeModal.classList.remove("visible"),this.elements.customizeModal.setAttribute("aria-hidden","true"),this.isCustomizing=!1)}},{key:"executeCallbacks",value:function(e){Object.keys(e).forEach((function(t){!0===e[t]&&Array.isArray(window.WiseSyncCookies.callbacks[t])&&window.WiseSyncCookies.callbacks[t].forEach((function(e){"function"==typeof e&&e()}))})),Object.keys(window.WiseSyncCookies.registeredServices).forEach((function(t){var i=window.WiseSyncCookies.registeredServices[t];if(!0===e[i.type]){var n=new CustomEvent("cookieServiceActivated",{detail:{service:t,name:i.name,type:i.type}});document.dispatchEvent(n)}}))}}])&&t(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i}();function c(e){var t=e.querySelector(".cookie-banner");t&&(t.classList.remove("hidden"),t.classList.remove("minimized"))}function r(e){e&&e.classList.add("hidden")}function a(e,t,i){var n="";if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),n="; expires="+o.toUTCString()}document.cookie=e+"="+encodeURIComponent(t)+n+"; path=/; Secure; SameSite=Lax"}function l(e){var t=new CustomEvent("cookieConsentUpdate",{detail:e});document.dispatchEvent(t),window.cookieConsent=e}function u(){return void 0!==window.visitorGeoData&&window.visitorGeoData.countryCode?window.visitorGeoData.countryCode:void 0!==window.geoipCountryCode?window.geoipCountryCode:""}function d(){var e=u(),t=365;return(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"].includes(e)||["GB","CN","KR"].includes(e))&&(t=180),t}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".wisesync-cookie-banner").forEach((function(e){var t=e.dataset.blockId,i=document.getElementById("cookie-config-"+t);if(i)try{var n=JSON.parse(i.textContent);new s(t,n)}catch(e){console.error("Error parsing cookie banner config:",e)}})),window.registerCookieCallback=function(e,t){void 0!==window.WiseSyncCookies.callbacks[e]&&"function"==typeof t&&(window.WiseSyncCookies.callbacks[e].push(t),window.is_sync_cookie_permission_to(e)&&t())}})),document.addEventListener("DOMContentLoaded",(function(){var e;(e=document.querySelectorAll(".wp-block-sync-cookie-banner")).length&&e.forEach((function(e){var t=JSON.parse(e.getAttribute("data-cookie-settings")||"{}"),i=!1!==t.showBanner;if(!i){e.classList.add("minimized-banner");var n=e.querySelector(".cookie-banner");n&&n.classList.add("minimized")}!function(e,t){var i=e.querySelector(".accept-all-cookies"),n=e.querySelector(".reject-all-cookies"),o=e.querySelector(".customize-cookies"),s=e.querySelector(".save-cookie-preferences"),c=e.querySelector(".cookie-settings"),v=e.querySelector(".cookie-banner");i&&i.addEventListener("click",(function(){!function(e){var t={necessary:!0,functional:!0,analytical:!0,advertising:!0,tracking:!0,acceptedAll:!0,timestamp:(new Date).toISOString(),version:{privacyPolicy:e.privacyPolicyVersion||"",terms:e.termsVersion||""},country:u()},i=d();a("cookie_consent",JSON.stringify(t),i),l(t)}(t),r(v)})),n&&n.addEventListener("click",(function(){!function(e){var t={necessary:!0,functional:!1,analytical:!1,advertising:!1,tracking:!1,acceptedAll:!1,timestamp:(new Date).toISOString(),version:{privacyPolicy:e.privacyPolicyVersion||"",terms:e.termsVersion||""},country:u()},i=d();a("cookie_consent",JSON.stringify(t),i),l(t)}(t),r(v)})),o&&c&&o.addEventListener("click",(function(){!function(e){e.classList.toggle("active")}(c)})),s&&s.addEventListener("click",(function(){!function(e,t){var i=e.querySelector("#cookie-functional"),n=e.querySelector("#cookie-analytical"),o=e.querySelector("#cookie-advertising"),s=e.querySelector("#cookie-tracking"),c={necessary:!0,functional:!!i&&i.checked,analytical:!!n&&n.checked,advertising:!!o&&o.checked,tracking:!!s&&s.checked,acceptedAll:!1,timestamp:(new Date).toISOString(),version:{privacyPolicy:t.privacyPolicyVersion||"",terms:t.termsVersion||""},country:u()};c.functional&&c.analytical&&c.advertising&&c.tracking&&(c.acceptedAll=!0);var r=d();a("cookie_consent",JSON.stringify(c),r),l(c)}(e,t),r(v),c&&c.classList.remove("active")}))}(e,t),function(e){var t=e.querySelector(".floating-cookie-button"),i=e.querySelector(".cookie-banner");t&&t.addEventListener("click",(function(){i.classList.contains("hidden")?c(e):r(i)}))}(e),!function(){var e=function(){for(var e="cookie_consent=",t=document.cookie.split(";"),i=0;i<t.length;i++){var n=t[i].trim();if(0===n.indexOf(e))return decodeURIComponent(n.substring(15))}return null}();if(!e)return!1;try{var t=JSON.parse(e),i=document.querySelectorAll(".wp-block-sync-cookie-banner");if(!i.length)return!0;var n=JSON.parse(i[0].getAttribute("data-cookie-settings")||"{}");return!n.checkVersionChanges||t.version.privacyPolicy===n.privacyPolicyVersion&&t.version.terms===n.termsVersion}catch(e){return!1}}()&&i&&setTimeout((function(){c(e)}),500)}))}))})();